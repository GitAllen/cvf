(function(n){var t=window.cvf={};t.content=n(".cvf-content");t.panorama=n(".cvf-content-panorama");t.body=n(".cvf-content-body");t.home=n(".cvf-content-home");n.extend(t,{render:function(n,t){var e=/<%(.+?)%>/g,o=/(^( )?(if|for|else|switch|case|break|var|{|}))(.*)?/g,i="var r=[];\n",r=0,f,u;if(t)for(f in t)i+="var "+f+'= this["'+f+'"];\n';for(u=function(n,t){return i+=t?n.match(o)?n+"\n":"r.push("+n+");\n":n!=""?'r.push("'+n.replace(/"/g,'\\"')+'");\n':"",u};match=e.exec(n);)u(n.slice(r,match.index))(match[1],!0),r=match.index+match[0].length;return u(n.substr(r,n.length-r)),i+='return r.join("");',new Function("",i.replace(/[\r\t\n]/g,"")).apply(t)},load:function(i,r,u,f){!f&&u&&(f=u.success);i instanceof n||(i=n(i));n.get(r,function(n){i.empty().html(t.render(n,u));f&&f(i,u)})},append:function(n){n.appendTo(t.body)},remove:function(n){n.element.remove()},clear:function(){t.body.empty()},open:function(n){this.clear();this.append(n)},progress:function(n){n.find(".cvf-panel").addClass("cvf-loading")},unprogress:function(n){n.find(".cvf-panel").removeClass("cvf-loading")},guid:{"new":function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},test:function(n){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(n)},empty:"00000000-0000-0000-0000-000000000000"}});t.controls={extend:function(n,i){var r=function(n,t){var i=new r.prototype.init(n,t);return i.element=i.element||n,i.options=i.options||t,i};r.prototype=i;r.prototype.init.prototype=r.prototype;r.prototype.constructor=r;t.controls[n]=r}}})(jQuery,window),function(n,t){var i={};t.controls.extend("dateRange",{init:function(r,u){var h=this,e,o,s,p;r instanceof n||(r=n(r));r.empty();u=n.extend({},i,u);r.addClass("select-box cursor-pointer");r.append('<i class="fa fa-calendar"><\/i> <span><\/span> <b class="caret"><\/b>');var f=t.common.normalize(moment().startOf("minutes")),c=moment().startOf("day"),l=moment().startOf("month"),w=moment().subtract(1,"month"),y={Today:[c,f],"Last 24 Hours":[f.clone().subtract(1,"days"),f],Yesterday:[c.clone().subtract(1,"days"),c],"Last 7 Days":[f.clone().subtract(7,"days"),f],"Last 30 Days":[f.clone().subtract(30,"days"),f],"This Month":[l,f.clone()],"Last Month":[l.clone().subtract(1,"months"),l]},a,v;for(e=0;e<4;e++)o=w.clone().subtract(e,"months").startOf("month"),s=o.clone().endOf("month"),e===0&&(a=s,v=o),p=s.format("YYYY/MM"),y[p]=[o,s];return r.find("span").html(v.format("YYYY/MM/DD")+" - "+a.format("YYYY/MM/DD")),r.daterangepicker({timePicker:!1,ranges:y,opens:"left",format:"YYYY/MM/DD",startDate:moment("2016/02/01","YYYY/MM/DD"),endDate:moment("2016/02/29","YYYY/MM/DD")},function(t,i,r){n("span",this.element).html(t.format("YYYY/MM/DD")+" - "+i.format("YYYY/MM/DD"));u.onChange&&u.onChange.call(h,t,i,r)}),u.onLoad&&u.onLoad.call(h,v,a),h}});typeof angular!="undefined"&&angular.module("cvfDateRange",[]).controller("mainCtrl",function(){}).directive("cvfDateRange",function(){return{restrict:"EA",replace:!0,template:'<div class="pull-right cursor-pointer"><\/div>',link:function(n,i){var r={};r.start=n.start;r.end=n.end;r.onChange=n.onDateRangeChange;r.onLoad=n.onDateRangeLoad;t.controls.dateRange(i,r)}}})}($,cvf,window),function(n,t){function i(n,t){return t?t.replace("~",n):""}function r(t,r,u,f,e){var o=this;return o.name=t,o.baseUri=r,o.scripts=[],n.isArray(u)||(u=[u]),n.each(u||[],function(){this.src&&o.scripts.push(i(r,this.src))}),o.stylesheets=[],n.isArray(f)||(f=[f]),n.each(f||[],function(){this.src&&o.stylesheets.push(i(r,this.src))}),o.templates={},n.isArray(e)||(e=[e]),n.each(e||[],function(){o.templates[this.name]=i(r,this.src)}),o}t.extensions=t.extensions||{};r.prototype={load:function(){n.each(this.scripts,function(){var n=document.createElement("script");n.src=this.valueOf();n.async=!1;document.body.appendChild(n)});n.each(this.stylesheets,function(){var n=document.createElement("link");n.href=this.valueOf();n.rel="stylesheet";document.body.appendChild(n)})}};t.extensions.register=function(i){if(n.isArray(i))n.each(i,function(){t.extensions.register(this.valueOf())});else{var u="/Extensions/"+i+"/"+i+"Extension.Manifest.xml";n.ajax({url:u,dataType:"xml",success:function(i){var u=n.xml2json(i).extension,f=new r(u.name,u.baseUri||"",u.scripts.script,u.stylesheets.stylesheet,u.templates.template);t.extensions[f.name]=f;f.load()},async:!1})}}}(jQuery,cvf,window),function(n,t){function r(n,t){this.element=n;var r=this;this.configure=function(n){this.config=n;this.config.size=this.config.size*.9;this.config.raduis=this.config.size*.97/2;this.config.cx=this.config.size/2;this.config.cy=this.config.size/2;this.config.min=undefined!=n.min?n.min:0;this.config.max=undefined!=n.max?n.max:100;this.config.range=this.config.max-this.config.min;this.config.majorTicks=n.majorTicks||5;this.config.minorTicks=n.minorTicks||2;this.config.greenColor=n.greenColor||"#109618";this.config.yellowColor=n.yellowColor||"#FF9900";this.config.redColor=n.redColor||"#DC3912";this.config.color=n.color||"auto";this.config.transitionDuration=n.transitionDuration||500;this.config.onLabelClick=n.onLabelClick;this.config.onTextClick=n.onTextClick};this.render=function(){var u,a,s,n,h,o,f,e,c,i,y;this.body=d3.select(this.element).append("svg:svg").attr("class","cvf-gauges").attr("width",this.config.size).attr("height",this.config.size);this.body.append("svg:circle").attr("cx",this.config.cx).attr("cy",this.config.cy).attr("r",this.config.raduis).classed("cvf-gauges-circle-out",!0);this.body.append("svg:circle").attr("cx",this.config.cx).attr("cy",this.config.cy).attr("r",.9*this.config.raduis).classed("cvf-gauges-circle-in",!0);for(u in this.config.greenZones)this.drawBand(this.config.greenZones[u].from,this.config.greenZones[u].to,r.config.greenColor);for(u in this.config.yellowZones)this.drawBand(this.config.yellowZones[u].from,this.config.yellowZones[u].to,r.config.yellowColor);for(u in this.config.redZones)this.drawBand(this.config.redZones[u].from,this.config.redZones[u].to,r.config.redColor);if(undefined!=this.config.label&&(i=Math.round(this.config.size/9),a=this.body.append("svg:text").attr("x",this.config.cx).attr("y",this.config.cy/2+i/2).attr("dy",i/2).text(this.config.label).classed("cvf-gauges-label",!0).classed("cvf-gauges-label-respon",function(){return!!t.onLabelClick}).style("font-size",i+"px"),t.onLabelClick))a.on("click",t.onLabelClick);for(i=Math.round(this.config.size/16),s=this.config.range/(this.config.majorTicks-1),n=this.config.min;n<=this.config.max;n+=s){for(h=s/this.config.minorTicks,o=n+h;o<Math.min(n+s,this.config.max);o+=h)f=this.valueToPoint(o,.75),e=this.valueToPoint(o,.85),this.body.append("svg:line").attr("x1",f.x).attr("y1",f.y).attr("x2",e.x).attr("y2",e.y).style("stroke","#666").style("stroke-width","1px");f=this.valueToPoint(n,.7);e=this.valueToPoint(n,.85);this.body.append("svg:line").attr("x1",f.x).attr("y1",f.y).attr("x2",e.x).attr("y2",e.y).style("stroke","#333").style("stroke-width","2px");(n==this.config.min||n==this.config.max)&&(c=this.valueToPoint(n,.63),this.body.append("svg:text").attr("x",c.x).attr("y",c.y).attr("dy",i/3).attr("text-anchor",n==this.config.min?"start":"end").text(n).style("font-size",i+"px").style("fill","#333").style("stroke-width","0px"))}var l=this.body.append("svg:g").attr("class","pointerContainer"),v=(this.config.min+this.config.max)/2,p=this.buildPointerPath(v),w=d3.svg.line().x(function(n){return n.x}).y(function(n){return n.y}).interpolate("basis");if(l.selectAll("path").data([p]).enter().append("svg:path").attr("d",w).style("fill","#dc3912").style("stroke","#c63310").style("fill-opacity",.7),l.append("svg:circle").attr("cx",this.config.cx).attr("cy",this.config.cy).attr("r",.12*this.config.raduis).style("fill","#4684EE").style("stroke","#666").style("opacity",1),i=Math.round(this.config.size/10),y=l.selectAll("text").data([v]).enter().append("svg:text").attr("x",this.config.cx).attr("y",this.config.size-this.config.cy/4-i).attr("dy",i/2).classed("cvf-gauges-text",!0).classed("cvf-gauges-text-respon",function(){return!!t.onTextClick}).style("font-size",i+"px"),t.onTextClick)y.on("click",t.onTextClick);this.redraw(this.config.min,0)};this.buildPointerPath=function(n){function t(n,t){var i=r.valueToPoint(n,t);return i.x-=r.config.cx,i.y-=r.config.cy,i}var i=this.config.range/13,f=t(n,.85),e=t(n-i,.12),o=t(n+i,.12),u=n-this.config.range*(360/270)/2,s=t(u,.28),h=t(u-i,.12),c=t(u+i,.12);return[f,e,c,s,h,o,f]};this.drawBand=function(n,t,i){0>=t-n||this.body.append("svg:path").style("fill",i).attr("d",d3.svg.arc().startAngle(this.valueToRadians(n)).endAngle(this.valueToRadians(t)).innerRadius(.65*this.config.raduis).outerRadius(.85*this.config.raduis)).attr("transform",function(){return"translate("+r.config.cx+", "+r.config.cy+") rotate(270)"})};this.redraw=function(n,t){var e=this.body.select(".pointerContainer"),f=Math.round(n*100/this.config.max),u,o;e.selectAll("text").text(Math.round(n));this.config.color=="auto"?(u=i.success,f>90?u=i.danger:f>80?u=i.warning:f>60&&(u=i.info),this.body.selectAll(".cvf-gauges-circle-out").style("fill",u)):this.config.color&&this.body.selectAll(".cvf-gauges-circle-out").style("fill",this.config.color);o=e.selectAll("path");o.transition().duration(undefined!=t?t:this.config.transitionDuration).attrTween("transform",function(){var i=n,t,u;return n>r.config.max?i=r.config.max+.02*r.config.range:n<r.config.min&&(i=r.config.min-.02*r.config.range),t=r.valueToDegrees(i)-90,u=r._currentRotation||t,r._currentRotation=t,function(n){var i=u+(t-u)*n;return"translate("+r.config.cx+", "+r.config.cy+") rotate("+i+")"}})};this.valueToDegrees=function(n){return n/this.config.range*270-(this.config.min/this.config.range*270+45)};this.valueToRadians=function(n){return this.valueToDegrees(n)*Math.PI/180};this.valueToPoint=function(n,t){return{x:this.config.cx-this.config.raduis*t*Math.cos(this.valueToRadians(n)),y:this.config.cy-this.config.raduis*t*Math.sin(this.valueToRadians(n))}};this.configure(t)}t.controls=t.controls||{};var i={success:"#5CB85C",info:"#5BC0DE",warning:"#F0AD4E",danger:"#D9534F"};t.controls.gauge=function(t,i){return t instanceof n&&(t=t.get(0)),new r(t,i)}}(jQuery,cvf,window),function(n,t){function s(n,r){var u=n.attr("data-url"),e=n.attr("data-title"),f;i.removeClass("cvf-nav-panel-zoomout").addClass("cvf-nav-panel-zoomin").find(".cvf-nav-panel-heading h1").text(e);i.find(".cvf-nav-panel-body").empty();u&&(f=i.addClass("cvf-loading").find(".cvf-nav-panel-body"),t.load(f,u,r,function(){r.success&&r.success.apply(this,arguments);i.removeClass("cvf-loading")}))}function u(){f.find(".active").removeClass("active");i.removeClass("cvf-nav-panel-zoomin").removeClass("cvf-loading").addClass("cvf-nav-panel-zoomout").find(".cvf-nav-panel-body").empty()}function h(t){var i=n(this);i.hasClass("active")?(i.removeClass("active"),u()):(f.find(".active").removeClass("active"),i.addClass("active"),s(i,t))}function l(){var t=n('<table class="cvf-nav-panel-list"/>');n.each(o,function(){var i=this,r=n("<tr/>"),f,e;r.appendTo(t);f=n('<td class="cvf-nav-panel-list-icon"/>').append(n('<i class="fa">').addClass(i.icon)).addClass(i.color);e=n('<td class="cvf-nav-panel-list-text"/>').append(n('<div class="cvf-nav-panel-list-title"/>').text(i.title),n('<div class="cvf-nav-panel-list-description"/>').text(i.description));r.append(f,e);r.click(function(){i.handler&&i.handler();u()})});i.removeClass("cvf-nav-panel-zoomout").addClass("cvf-nav-panel-zoomin").find(".cvf-nav-panel-heading h1").text("New");i.find(".cvf-nav-panel-body").empty().append(t)}var r,o;if(!t.nav){r={};t.nav=r;var c=[],f=n(".cvf-nav-bar"),i=n(".cvf-nav-panel"),e={top:n(".cvf-nav-top-region"),middle:n(".cvf-nav-middle-region"),bottom:n(".cvf-nav-bottom-region")};r.close=u;r.open=s;r.register=function(t,i){var s,f,i,u,o;if(n.isArray(t))for(s=t.length,f=0;f<s;f++)r.register(t[f],i);else i=e[i]||e.middle,c.push(t),u=n('<div class="cvf-nav-button"/>'),o=n('<span class="cvf-nav-button-icon"><i class="fa"><\/i><\/span>'),t.color&&o.addClass("color-"+t.color),t.icon&&o.find("i").addClass(t.icon),u.click(function(){t.onClick?t.onClick.call():h.call(this,t)}),u.attr("data-url",t.url).attr("data-title",t.title).append(o),t.showText!==!1&&u.append('<div class="cvf-nav-button-title">'+t.title+"<\/div>"),i.find("ul").append(n("<li/>").append(u))};o=[];r.registerNew=function(n){o.push(n)};i.find(".cvf-controls-close").click(u);t.panorama.click(function(){u()});f.find(".cvf-nav-button").click(h);e.bottom.find('.cvf-nav-button[data-title="New"]').unbind("click").click(function(){l()})}}(jQuery,cvf,window),function(n,t){function r(n,t,i){function g(){var n=v.append("g").style("class","cvf-opie-center"),i;n.append("circle").style("fill","rgba(255, 255, 255, 0.75)").attr("r",0).attr("filter","url(#"+a+"-DropShadow)").transition().duration(e).delay(s).attr("r",r-90);i=n.append("circle").style("fill","#fff").attr("r",0).transition().delay(s).duration(e).attr("r",r-95).attr("fill","#fff").each("end",function(){n.append("text").text(t.centerText).attr("text-anchor","middle").attr("class","cvf-opie-center-text")})}function nt(n,i){var w=i.getBBox(),u=f-r*2-50,s,o,v=c.indexOf(n)+1,y=Math.min(h/c.length+1,60),a=f-u,p=y*v;l!="left"&&(a=0);o=k.append("g").attr("width",u).attr("transform","translate("+a+","+p+")");s="end";position="right";o.data([n.title]).append("text").attr("y",-10).style("fill",n.color).style("font-size","20px").text(n.title);o.data([n.value]).append("text").text("0"+t.valuePostfix).attr("class","cvf-opie-detail-percentage").style("fill",n.color).attr("x",position==="left"?0:u).attr("y",-10).attr("text-anchor",s).transition().duration(e).tween("text",function(n){var i=d3.interpolateNumber(+this.textContent.replace(t.valuePostfix,""),n);return function(n){this.textContent=i(n).toFixed(2)+t.valuePostfix}});o.append("line").attr({"class":"cvf-opie-detail-divider",x1:0,x2:0,y1:0,y2:0}).transition().duration(e).attr("x2",u).each("end",function(){o.data([n.description]).append("text").attr("width",u).attr("height",100).attr("y","20").attr("class","cvf-opie-detail-textContainer").text(n.description)})}var e=t.duration||1500,s=t.delay||500,f=n.clientWidth,h=t.height||f/2,r=Math.min(f,h)/2,p=d3.select(n),c=i,l=t.position||"left",o=p.append("svg").style({width:f}),w=l=="left"?r:f-r,b=r,a=u(o),v=o.append("g").attr("transform","translate("+w+","+b+")"),k=o.append("g"),d=d3.layout.pie().value(function(n){return n.value}),y=d3.svg.arc().outerRadius(r-20).innerRadius(0),tt=v.datum(i).selectAll("path").data(d).enter().append("path").style("fill",function(n){return n.data.color}).attr("filter","url(#"+a+"-InsetShadow)").attr("d",y).each(function(){this._current={startAngle:0,endAngle:0}}).transition().duration(e).attrTween("d",function(n){var t=d3.interpolate(this._current,n);return this._current=t(0),function(n){return y(t(n))}}).each("end",function(n){nt(n.data,this)});g()}function u(n){var u=t.guid.new(),e=n.append("defs"),i=e.append("filter").attr("id",u+"-InsetShadow"),r,f;return i.append("feOffset").attr({dx:"0",dy:"0"}),i.append("feGaussianBlur").attr({stdDeviation:"3",result:"offset-blur"}),i.append("feComposite").attr({operator:"out","in":"SourceGraphic",in2:"offset-blur",result:"inverse"}),i.append("feFlood").attr({"flood-color":"black","flood-opacity":"1",result:"color"}),i.append("feComposite").attr({operator:"in","in":"color",in2:"inverse",result:"shadow"}),i.append("feComposite").attr({operator:"over","in":"shadow",in2:"SourceGraphic"}),r=e.append("filter").attr("id",u+"-DropShadow"),r.append("feGaussianBlur").attr({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),r.append("feOffset").attr({"in":"blur",dx:"0",dy:"3",result:"offsetBlur"}),f=r.append("feMerge"),f.append("feMergeNode"),f.append("feMergeNode").attr("in","SourceGraphic"),u}t.controls=t.controls||{};var i=function(n,t){return new i.prototype.init(n,t)};i.prototype={init:function(t,i){return this.options=n.extend({valuePostfix:""},i),this.element=t,this.ul=null,this},draw:function(t,i){var u,f,e;this.ul||(this.ul=n('<ul class="cvf-opie"/>').appendTo(this.element));u=this.options;i&&(u=n.extend({},this.options,i));f=n("<li/>");e=n("<div><\/div>");f.appendTo(this.ul);u.caption&&f.append('<div class="cvf-opie-headline">'+u.caption+"<\/div>");u.description&&f.append('<div class="cvf-opie-subHeadline">'+u.description+"<\/div>");e.appendTo(f);r(e.get(0),u,t)},clear:function(){this.ul&&this.ul.empty()},destroy:function(){this.ul&&this.ul.remove()}};i.prototype.init.prototype=i.prototype;t.controls.opie=i}($,cvf,window);$.extend($.validator.defaults,{highlight:function(n){$(n).closest(".form-group,form").addClass("has-error")},unhighlight:function(n){$(n).closest(".form-group,form").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(n,t){t.parent(".input-group").length?n.insertAfter(t.parent()):n.insertAfter(t)}});$.validator.addMethod("guid",function(n){return cvf.guid.test(n)},"Please enter valid guid.");$.validator.addMethod("password",function(n){return/^[^%\s]{6,}$/.test(n)&&/[a-zA-Z]/.test(n)&&/[0-9]/.test(n)&&/[^a-zA-Z0-9]/.test(n)},"Password must have at least 6 characters, at least one non leter or digit character, one uppercase, one lowercase and one digit"),function(n,t){var u=t.start={},f=n(".cvf-content-panorama .cvf-content-home .cvf-panel-body"),i={},r=r||{};t.box=t.box||{};t.box.create=function(u){var f=n('<div class="cvf-box"/>'),e,o,s;return u.col&&f.addClass("cvf-box-col"+u.col),u.row&&f.addClass("cvf-box-row"+u.row),u.theme&&f.addClass("cvf-box-"+u.theme),u.class&&f.addClass(u.class),u.color&&(u.style=u.style||{},u.style.color=u.color),u.style&&f.css(u.style),u.url?i[u.url]?f.html(t.render(i[u.url],u)):(f.html('<div class="cvf-box-loading"><i class="fa fa-spinner fa-spin"><\/i><\/div>'),n.get(u.url,function(n){i[u.url]=n;f.html(t.render(n,u));u.onLoad&&u.onLoad.call(f,u)}).error(f.html('<div class="cvf-box-error"><i class="fa fa-warning"><\/i><\/div>'))):(u.html?f.html(u.html):(u.icon||u.title)&&(u.icon&&(e=n('<div class="cvf-box-icon"><\/div>'),s=u.icon.indexOf("fa")==0?"fa "+u.icon:u.icon,e.append('<i class="'+s+'"><\/i>')),u.title&&(o='<span class="cvf-box-title">'+u.title+"<\/span>"),f.append(n("<div/>").append(e,o))),u.onLoad&&u.onLoad.call(f,u)),u.onClick&&(f.css("cursor","pointer"),f.click(function(n){u.onClick.call(f,u,n)})),f.option=u,r[u.name||u.title]=f,f};t.box.get=function(n){return r[n]};u.register=function(i){if(n.isArray(i))for(var r=0,e=i.length;r<e;r++)u.register(i[r]);else f.append(t.box.create(i))}}(jQuery,cvf,window),function(n,t,i){if(Date.fromJSON=function(n){if(n!=null){if(n.indexOf("Date")>-1){var i=new Date(parseInt(n.substr(6))),t=new Date;return t.getTimezoneOffset(),new Date(i.getTime()-t.getTimezoneOffset()*6e4)}return new Date(n)}},Date.formatJSON=function(n,t){if(n){var r=Date.fromJSON(n),u=new Date,i=t;return i&&typeof i=="string"||(i="hh:mm:ss",r.toDateString()!=u.toDateString()&&(i="MM/dd/yyyy HH:mm:ss")),r.format(i)}return"N/A"},Date.prototype.format=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));/(E+)/.test(n)&&(n=n.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"\u661f\u671f":"\u5468":"")+{"0":"\u65e5","1":"\u4e00","2":"\u4e8c","3":"\u4e09","4":"\u56db","5":"\u4e94","6":"\u516d"}[this.getDay()+""]));for(t in i)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n},Math.o_round=Math.round,Math.round=function(n,t){if(!t||t<0)return Math.o_round(n);var i=Math.pow(10,t);return Math.o_round(n*i)/i},i.common=i.common||{},n.extend(i.common,{getSize:function(n,t,i,r){var f,u,e;for(t||(t="B"),i||(i="Auto"),r&&(n+=r),f=["B","KB","MB","GB","TB","PB"],u=-1,u=0;u<f.length;u++)if(f[u].toLowerCase()==t.toLowerCase())break;for(e=n,i=i.toLowerCase();u<f.length;){if(unit=f[u],u++,i!="auto"&&unit.toLowerCase()==i)break;if(i=="auto"&&e<1024)break;e=e/1024}return unit=f[u-1],{value:Math.round(e,2),unit:unit}},getSizeStr:function(n,t,i,r){var u=this.getSize(n,t,i,r);return u?u.value+u.unit:null},random:function(n,t){return parseInt(Math.random()*(t-n)+n)},getRandomColor:function(){for(var i="0123456789ABCDEF".split(""),n="#",t=0;t<6;t++)n+=i[Math.round(Math.random()*15)];return n},numberFormatter:function(n){var t=parseFloat(n);return isNaN(t)?"N/A":Math.round(t,2)},datetimeFormatter:function(n){return n?Date.fromJSON(n).format("MM/dd/yyyy hh:mm"):"N/A"},dateFormatter:function(n){return n?Date.fromJSON(n).format("MM/dd/yyyy"):"N/A"},max:function(n,t){return n>t?n:t},min:function(n,t){return n>t?t:n},wrapeUrl:function(n){return n?'<a target="_blank" href="'+n+'">'+n+"<\/a>":""},setReadonlyProperty:function(n,t,i){Object.defineProperty(n,t,{value:i,writable:!1,configurable:!1})},setReadonlyProperties:function(n,t){for(var r in t)i.common.setReadonlyProperty(n,r,t[r])},normalize:function(n){var t=n.clone(),i;return t._d.setSeconds(0),i=t._d.getMinutes(),i>=45?t._d.setMinutes(45):i>=30?t._d.setMinutes(30):i>=15?t._d.setMinutes(15):t._d.setMinutes(0),t}}),typeof ko!="undefined"&&(ko.bindingHandlers.donut={init:function(){},update:function(t,i,r){var s=i(),u=ko.unwrap(s),f=r(),e=f.donutLabel,o=f.donutValue;e&&n.each(u,function(){this.hasOwnProperty("value")||(this.value=this[o])});o&&n.each(u,function(){this.hasOwnProperty("label")||(this.label=this[e])});Morris.Donut({element:t,data:u})}}),typeof angular!="undefined"){var r=angular.module("cvfMorris",[]).controller("mainCtrl",function(n,t){console.log("attrs:",t)});r.directive("cvfDonut",function(){return{restrict:"EA",replace:!0,template:"<div><\/div>",scope:{data:"=data",label:"@label",value:"@value",colors:"=colors"},link:function(t,i){t.$watch("data",function(){var u=t.data,r=[],f;n.isArray(u)&&n.each(u,function(){r.push({value:Math.round(this[t.value],2),label:this[t.label]})});r.length>0?(f=t.colors||Morris.Donut.prototype.defaults.colors,Morris.Donut({element:i,data:r,colors:f})):i.empty()})}}});r.directive("cvfArea",function(){return{restrict:"EA",replace:!0,template:"<div><\/div>",scope:{data:"=data",xkey:"@xkey",ykeys:"@ykeys",labels:"@labels",colors:"=colors"},link:function(n,t){n.$watch("data",function(){var r=n.ykeys.split(","),u=n.labels.split(","),i;n.data&&n.data.length>0?(i=n.colors||Morris.Area.prototype.defaults.lineColors,Morris.Area({element:t,data:n.data,lineColors:i,xkey:n.xkey,ykeys:r,labels:u})):t.empty()})}}});r.directive("cvfHistory",function(){var t=["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed","#1d953f","#56452d"];return{restrict:"EA",replace:!0,template:'<div><div history-chart style="height:350px;"><\/div><div history-data><table class="table"><thead><tr><th>Name<\/th><th>Source<\/th><th>Max<\/th><th>Min<\/th><th>Avg<\/th><\/tr><\/thead><tbody><tr ng-repeat="raw in Raws">    <td class="cursor-pointer donut-color-mark" ng-click="toggleLine(raw)" ng-style="{\'border-left-color\':raw.Display?raw.Color:\'#CCC\'}">{{raw.Name}}<\/td>    <td>{{raw.Source}}<\/td>    <td>{{raw.Max}}<\/td>    <td>{{raw.Min}}<\/td>    <td>{{raw.Avg}}<\/td><\/tr><\/tbody><\/table><\/div><\/div>',scope:{data:"=data"},link:function(i,r){function e(i){var u=[],r=[];return i=i||[],n.each(i,function(i){var e=this,o=null,s=null,l=0,h=0,c=null,a=e.Name+"("+e.Source+")",v=function(n,t){return n===null?t:t===null?n:n>t?t:n},y=function(n,t){return n===null?t:t===null?n:n>t?n:t};n.each(e.Raws,function(n){var i=r[n],t;i||(i=r[n]={},i.Date=Date.fromJSON(this.Date).format("yyyy-MM-dd HH:mm"));t=this.Value;i[a]=t;s=y(s,t);o=v(o,t);t!==null&&(h++,l+=t)});h!==0&&(c=Math.round(l/h,3));u.push({Name:e.Name,Key:a,Source:e.Source,Max:s===null?"--":s,Min:o===null?"--":o,Avg:c===null?"--":c,Raws:e.Raws,Color:t[i%t.length],Display:i<f})}),{Raws:u,ChartRaws:r}}function o(n){n.Display=!n.Display;u()}function u(){var t=[],u=[],f;n.each(i.Raws,function(){this.Display&&(t.push(this.Key),u.push(this.Color))});f=r.find("[history-chart]").empty();i.ChartRaws.length>0&&Morris.Line({element:f,data:i.ChartRaws,lineColors:u,xkey:"Date",ykeys:t,labels:t,ymax:45,ymin:-45})}var f=5;i.toggleLine=o;i.$watch("data",function(){var n=e(i.data);i.Raws=n.Raws;i.ChartRaws=n.ChartRaws;u()},!0)}}})}}(jQuery,window,cvf),function(n,t){function e(t){t.element.find(".cvf-controls").unbind("click").click(function(i){var r=n(i.target),u;if(r.hasClass("cvf-controls-maximize"))t.maximize();else if(r.hasClass("cvf-controls-restore"))t.restore();else if(r.hasClass("cvf-controls-refresh")){if(t.refresh(),t.render(),t.children){for(u=0;u<t.children.length;u++)t.children[u].close();t.children=[]}}else r.hasClass("cvf-controls-close")?t.close():r.hasClass("cvf-controls-toolbar")&&(r.attr("shown")=="false"?t.showToolbar():t.hideToolbar())})}function u(n,t){if(typeof t=="function")return function(){t.apply(n,arguments)}}function o(t){t.element.find(".cvf-panel-toolbar-button").click(function(){for(var r=t.options.tools,u=n(this).attr("data-toolname"),i=r.length-1;i>=0;i--)if(r[i].name==u){r[i].handler&&r[i].handler();return}})}function l(n){var t=this;n.TypeName?t.message(n.Message,n.TypeName):t.message("submit success","success");t.options.submitSuccess&&t.options.submitSuccess.apply(t,arguments)}function a(){var n=this;n.message("submit error","error");n.options.submitError&&n.options.submitError.apply(n,arguments)}function v(n){var t=n.body.find("form");t.validate();t.ajaxForm({beforeSubmit:u(n,n.options.beforeSubmit),success:u(n,l),error:u(n,a)})}function s(t){t.element.find('[data-cvf-focusable="true"]').mousedown(function(){n("[tabindex=0]").attr("tabindex",null);n(this).attr("tabindex",0)})}function h(i){if(i.templates[i.options.url]){if(i.body.html(t.render(i.templates[i.options.url],i.content)),v(i),s(i),i.options.afterRender){var u=i.body.find('link[rel="stylesheet"],script[src]'),r=u.length;if(r>0)u.on("load",function(){r--;r==0&&i.options.afterRender.call(i,i.content.data)});else i.options.afterRender.call(i,i.content.data)}i.cascading();i.options.autoInitControls!==!1&&c(i)}else n.get(i.options.url,function(n){i.templates[i.options.url]=n;h(i)})}function c(t){t.body.find('table[data-table="true"]').each(function(){var t=n(this);n.fn.dataTable.isDataTable(t)&&t.dataTable().fnDestroy();t.dataTable({pageLength:15,paging:t.attr("data-table-paging")!="false",ordering:t.attr("data-table-ordering")!="false",order:[[t.attr("data-table-order-index"),t.attr("data-table-order-sort")]],info:t.attr("data-table-info")!="false"})});s(t)}var r;t.window=t.window||{};var f=300,y=t.content,i=t.panorama;r=function(t){var i=[],r;i.push('<div class="cvf-window" data-trigger="controls">');i.push('     <div class="cvf-window-msgbar"><\/div>');i.push('     <div class="cvf-window-title"><\/div>');i.push('     <div class="cvf-window-content">');i.push('         <div class="cvf-panel">');i.push('             <div class="cvf-panel-heading">');i.push("                 <h1>"+t.title+"<\/h1>");i.push('                 <div class="cvf-controls">');t.controls&&(i.push('                     <div  data-cvf-focusable="true" class="cvf-controls-maximize">'),i.push("                     <\/div>"));i.push('<div data-cvf-focusable="true" class="cvf-controls-refresh"><i class="fa fa-refresh cvf-controls-refresh"><\/i>');i.push("<\/div>");i.push('                     <div data-cvf-focusable="true" class="cvf-controls-close">');i.push("                     <\/div>");i.push("                 <\/div>");t.tools&&(i.push('<div class="cvf-panel-toolbar"><ul>'),n.each(t.tools,function(){i.push('<li data-cvf-focusable="true">');i.push('<div class="cvf-panel-toolbar-button" data-toolname="'+this.name+'">');i.push('<div class="cvf-panel-toolbar-button-text">'+(this.text||this.name)+"<\/div>");i.push('<div class="cvf-panel-toolbar-button-icon"><i class="fa '+this.icon+'"/><\/div>');i.push("<\/div>");i.push("<\/li>")}),i.push("<\/ul><\/div>"));i.push("             <\/div>");i.push('             <div class="cvf-panel-body">');i.push("             <\/div>");i.push("         <\/div>");i.push("     <\/div>");i.push("<\/div>");r=this;r.element=n(i.join(""));["large","small","extrasmall"].indexOf(t.width)>=0?r.element.addClass("cvf-window-"+t.width):r.element.width(t.width);r.body=r.element.find(".cvf-panel-body");r.options=t;r.content=t.content||{};t.tools&&(r.toolbar=r.element.find(".cvf-panel-toolbar"));r.templates={};t.background&&r.body.addClass(t.background)};r.prototype={appendTo:function(n){return this.element.appendTo(n),e(this),o(this),this},progress:function(n){return this.message(n||"","progress")},unprogress:function(){return this.element.find(".cvf-window-msgbar").removeClass("cvf-window-msgbar-progress"),this},message:function(n,t){var i=this.element.find(".cvf-window-msgbar").text(n||"");return typeof n=="undefined"&&typeof t=="undefined"&&i.attr("class","cvf-window-msgbar"),t&&i.attr("class","cvf-window-msgbar cvf-window-msgbar-"+t),this},clean:function(){return this.message()},success:function(n){return this.message(n,"success")},info:function(n){return this.message(n,"info")},warning:function(n){return this.message(n,"warning")},error:function(n){return this.message(n,"error")},clear:function(t){return typeof t=="undefined"?(this.message(""),this.body.empty()):(typeof t=="string"?t=n(t,this.body):!t instanceof jQuery&&(t=n(t)),t.val("").text("")),this},title:function(n){return n===undefined?this.element.find(".cvf-panel-heading h1").text():(this.element.find(".cvf-panel-heading h1").html(n),this)},url:function(n){return n===undefined?this.options.url:(this.options.url=n,this)},visible:function(){return this.element.is(":visible")},showToolbar:function(){this.toolbar&&(this.toolbar.show(),this.body.addClass("cvf-panel-bodywithtoolbar"),this.element.find(".cvf-controls-toolbar").attr("shown","true"))},hideToolbar:function(){this.toolbar&&(this.toolbar.hide(),this.body.removeClass("cvf-panel-bodywithtoolbar"),this.element.find(".cvf-controls-toolbar").attr("shown","false"))},openChild:function(n){var i=n instanceof r?n:t.window.create(n);return i.parent=this,this.children||(this.children=[]),this.children.push(i),i.element.insertAfter(this.element),e(i),o(i),i.active(),this},submit:function(){var n=this.body.find("form");n.length!=0?(this.progress(),n.submit()):(this.unprogress(),this.warning("Need a form element to trigger the submit action."))},reset:function(){return this.render()},render:function(n){var t=this;return t.content=t.content||{},t.content.data=n||{},t.options.beforeRender&&t.options.beforeRender.call(t,n),h(t),this},apply:function(n,t){return t?typeof t=="string"&&(t=this.body.find(t)):(t=this.body.find('section[data-conent="ko"]'),t.length==0&&(t=this.body)),t.each(function(){ko.cleanNode(this);ko.applyBindings(n,this)}),this},ajax:function(t,i){i=i||{};var r=this,u=function(n){r.unprogress();r.open().render(n);i.success&&i.success.apply(r,arguments)},f=function(n,t,u){r.error(t||u);i.error&&i.error.apply(this,arguments)},e=n.extend({},i,{success:u,error:f});return r.progress(),n.ajax(t,e),this},get:function(n,t,i,r){return this.ajax(n,{type:"GET",data:t,success:i,dataType:r})},getJSON:function(n,t,i){return this.get(n,t,i,"json")},post:function(n,t,i,r){return this.ajax(n,{type:"POST",data:t,success:i,dataType:r})},open:function(){return this.visible()||(this.appendTo(t.body),this.element.removeClass("cvf-maximize").removeClass("cvf-minimum").width("").find(".cvf-controls-restore").attr("class","cvf-controls-maximize")),this.active(),this},refresh:function(){return this.options.refresh&&typeof this.options.refresh=="function"&&this.options.refresh(),this},close:function(){this.children&&n.each(this.children,function(){this.close()});var t=this.element;return t.animate({width:20},100,function(){t.remove();t.width("")}),this.options.afterClose&&this.options.afterClose.call(),this},maximize:function(){var t=i.outerWidth(),n=this;return n._orgw||(n._orgw=n.element.outerWidth()),n.element.find(".cvf-controls-maximize").attr("class","cvf-controls-restore"),n.element.animate({width:t},f,function(){n.active()}).css("overflow","visible").removeClass("cvf-minimum").addClass("cvf-maximize"),this},minimize:function(){return this.element.removeClass("cvf-maximize").addClass("cvf-minimum"),this},restore:function(){var n=this,t=n._orgw;return n.element.removeClass("cvf-maximize").removeClass("cvf-minimum").animate({width:t},f,function(){n.active()}).css("overflow","visible").find(".cvf-controls-restore").attr("class","cvf-controls-maximize"),this},active:function(){return i.scrollLeft(i.scrollLeft()+this.element.offset().left-i.offset().left-(i.outerWidth()-this.element.outerWidth())/2),this},bootstrap:function(t,i){t?typeof t=="string"&&(t=this.body.find(t)):t=this.body.find("[ng-app]");i?n.isArray(i)||(i=[i]):i=[];t.each(function(){var t=n(this).attr("ng-app");t=t?[t].concat(i):[].concat(i);angular.bootstrap(this,t)})},scope:function(n){if(n?typeof n=="string"&&(n=this.body.find(n)):n=this.body.find("[ng-controller]"),n.length<=1)return angular.element(n).scope();var t=[];return n.each(function(){t.push(angular.element(this).scope())}),t},cascading:function(){if(this.children){var t=arguments;n.each(this.children,function(){var n=this;n.visible()&&n.options.cascade&&n.options.cascade.apply(n,t)})}},initControls:function(){c(this)}};t.window.create=function(n){return new r(n)}}(jQuery,cvf,window);